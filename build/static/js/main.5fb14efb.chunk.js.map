{"version":3,"sources":["components/ProductList.js","utils/utils.js","components/Cart.js","components/App.js","api/shop.js","models/products.js","models/cart.js","index.js"],"names":["handleMenuClick","e","message","info","console","log","ProductList","menu","react_default","a","createElement","es_menu","onClick","Item","key","_this$props","this","props","products","addToCart","list","map","item","className","src","jpg","alt","title","price","installments","es_button","type","id","disabled","style","color","backgroundColor","borderColor","margin","lineHeight","dropdown","overlay","icon","React","Component","connect","_ref","byId","result","dispatch","payload","Cart","state","visible","placement","showDrawer","_this","setState","onClose","subtotal","onCheckout","loading","checking","nodes","quantity","display","width","height","marginLeft","border","t","class","viewBox","version","xmlns","p-id","d","fill","drawer","closable","cart","added","Object","objectSpread2","quantities","reduce","amount","toFixed","models","effects","App","Header","Layout","Footer","Sider","Content","layout","components_Cart","src_components_ProductList","shop","axios","get","Promise","resolve","reject","setTimeout","schema","Entity","models_products","namespace","query","regenerator_default","mark","action","call","put","res","wrap","_context","prev","next","sent","normalize","data","stop","reducers","setProducts","_ref2","entities","decinstallments","_ref3","selected","defineProperty","initialState","models_cart","add","select","product","checkout","_ref4","_context2","_ref5","includes","toConsumableArray","concat","checkoutCompleted","app","dva","model","use","createLoading","router","components_App","start"],"mappings":"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","file":"static/js/main.5fb14efb.chunk.js","sourcesContent":["import React from 'react';\nimport {connect} from 'dva';\nimport { d } from '../utils/utils';\nimport { Menu, Dropdown, Button, Icon, message } from 'antd';\nimport 'antd/dist/antd.css';\nimport './ProductList.css';\n\n\nfunction handleMenuClick(e) {\n  message.info('Click on menu item.');\n  console.log('click', e);\n}\n\nclass ProductList extends React.Component  {\n\n  render() {\n    const menu = (\n      <Menu onClick={handleMenuClick}>\n        <Menu.Item key=\"1\">\n        Highest to lowest\n        </Menu.Item>\n        <Menu.Item key=\"2\">\n        Lowest to Highest\n        </Menu.Item>\n      </Menu>\n    );\n  const { products, addToCart } = this.props;\n  const list = (products || []).map((item, key) => (\n    <li key={key}>\n      <div className='pname'>\n        <img src={item.jpg} alt=\"\"/>\n        <div>{item.title}</div>\n        <div>${item.price}</div>\n        <div>剩余{item.installments}件</div>\n      </div>\n      <div>\n        <Button type=\"primary\" onClick={() => addToCart(item.id)} disabled={!item.installments} style={{color:'#000000',backgroundColor:\"#e8e8e8\",borderColor:'#f5f5f5'}}><p style={{margin:'auto',lineHeight:'0px'}}>添加购物车</p></Button>\n      </div>\n    </li>\n  ));\n  return (\n    <div>\n      <h1>Products</h1>\n      <div id=\"components-dropdown-demo-dropdown-button\">\n    \n    <Dropdown overlay={menu}>\n      <Button>\n      <span style={{margin:'auto',lineHeight:'0px'}}>Order by <Icon type=\"down\" /></span>\n      </Button>\n    </Dropdown>\n  </div>\n      <ul className='item'>\n        {list}\n      </ul>\n    </div>\n  );\n}};\n\nconst mapStateToProps = ({products}) => ({\n  products: d(products.byId, products.result)\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  addToCart: (id) => dispatch({\n    type: 'cart/add',\n    payload: {\n      id\n    }\n  })\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductList);","\nexport const d = (byId, result) => result.map(id => byId[id])\n","import React from 'react';\nimport { connect } from 'dva';\nimport { Drawer,Button} from \"antd\";\nclass Cart extends React.Component {\n  state = { visible: false, placement: \"right\" };\n\n  showDrawer = () => {\n    this.setState({\n      visible: true\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      visible: false\n    });\n  };\n\n  \n  render() {\n  const { products, subtotal, onCheckout, loading, checking } = this.props;\n  const nodes = products.map((item, key) => (\n    <li key={key}>\n      {item.title} {item.price} x {item.quantity}\n    </li>\n  ));\n  return (\n    <div style={{display:'flex',width:\"100%\"}}>\n      <Button style={{height:'64px',display:'flex',marginLeft:'auto', border: \"none\"}}>\n          <svg type=\"primary\" onClick={this.showDrawer} t=\"1575795045272\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2606\" width=\"64\" height=\"64\"><path d=\"M1005.94270776 797.03077888H265.53154332c-21.94242333 0-42.52558222-8.54395221-57.86585999-24.0784111-15.3402789-15.53445888-23.88423111-35.92343666-23.69005112-57.86586112l2.71853112-545.25952c0-21.74824334-7.57304889-36.3117989-45.24411334-42.3314011h-0.19417999l-108.74121557-18.64135111c-10.48576-1.74762667-17.67044779-11.84502557-15.92281998-22.33078557 1.74762667-10.48576 11.84502557-17.67044779 22.33078442-15.92282112l108.54703446 18.64135112c51.65207666 8.15559111 77.86647666 35.34089443 77.86647666 80.7791889L222.61759999 715.47486776c0 11.45666333 4.27197667 22.13660445 12.42756779 30.09801558 8.15559111 8.15559111 18.83553223 12.62174777 30.29219555 12.62174777h740.41116445c10.67994112 0 19.41807445 8.73813333 19.41807331 19.41807445s-8.54395221 19.41807445-19.22389333 19.41807332z\" fill=\"\" p-id=\"2607\"></path><path d=\"M950.60119665 685.57103445l-685.65219556-2.13598891c-21.55406222-0.19418112-41.74885888-8.54395221-56.89495665-23.88423111-15.14609778-15.3402789-23.30168889-35.53507555-23.30168889-57.08913777l2.13598777-402.73085554L962.64040333 257.5966811c35.14671445 1.35926557 62.72037888 29.90383445 62.72037888 65.0505489V611.00563c0 41.16631666-33.59326777 74.56540445-74.75958556 74.56540445zM265.33736333 644.59889778l685.45801444 2.13598776c19.80643555 0 35.92343666-16.1170011 35.92343666-35.72925554V322.64723c0-14.17519445-11.26248334-25.8260389-25.43767666-26.2144h-0.77672334l-734.58574222-54.75896888-1.74762667 361.17617778c0 11.06830222 4.27197667 21.55406222 12.03920669 29.51547221 7.37886777 7.76723001 17.86462777 12.23338667 29.1271111 12.23338667z\" fill=\"\" p-id=\"2608\"></path><path d=\"M340.87367111 861.11042332m-72.42941668 0a72.42941667 72.42941667 0 1 0 144.85883335 0 72.42941667 72.42941667 0 1 0-144.85883335 0Z\" fill=\"#7DE5DB\" p-id=\"2609\"></path><path d=\"M340.87367111 952.95791445c-50.68117333 0-91.84748999-41.16631666-91.84749-91.84749113s41.16631666-91.84748999 91.84749-91.84748999c50.68117333 0 91.84748999 41.16631666 91.84748998 91.84748999s-41.16631666 91.84748999-91.84748998 91.84749113z m0-144.85883335c-29.32129223 0-53.01134222 23.69004999-53.01134223 53.01134222s23.69004999 53.01134222 53.01134223 53.01134222 53.01134222-23.69004999 53.01134222-53.01134222-23.69004999-53.01134222-53.01134222-53.01134222z\" fill=\"\" p-id=\"2610\"></path><path d=\"M896.81313223 861.11042332m-72.42941668 0a72.42941667 72.42941667 0 1 0 144.85883221 0 72.42941667 72.42941667 0 1 0-144.85883221 0Z\" fill=\"#7DE5DB\" p-id=\"2611\"></path><path d=\"M896.81313223 952.95791445c-50.68117333 0-91.84748999-41.16631666-91.84749114-91.84749113s41.16631666-91.84748999 91.84749114-91.84748999 91.84748999 41.16631666 91.84748998 91.84748999-41.16631666 91.84748999-91.84748998 91.84749113z m0-144.85883335c-29.32129223 0-53.01134222 23.69004999-53.01134223 53.01134222s23.69004999 53.01134222 53.01134223 53.01134222 53.01134222-23.69004999 53.01134222-53.01134222-23.69004999-53.01134222-53.01134222-53.01134222z\" fill=\"\" p-id=\"2612\"></path><path d=\"M780.30468778 426.33974556H384.56433777c-10.67994112 0-19.41807445-8.73813333-19.41807445-19.41807445s8.73813333-19.41807445 19.41807445-19.41807445h395.74035001c10.67994112 0 19.41807445 8.73813333 19.41807331 19.41807445s-8.73813333 19.41807445-19.41807331 19.41807445zM780.30468778 537.99367111H384.56433777c-10.67994112 0-19.41807445-8.73813333-19.41807445-19.41807445s8.73813333-19.41807445 19.41807445-19.41807332h395.74035001c10.67994112 0 19.41807445 8.73813333 19.41807331 19.41807332s-8.73813333 19.41807445-19.41807331 19.41807445z\" fill=\"\" p-id=\"2613\"></path></svg>\n        </Button>\n        <Drawer\n          title=\"Basic Drawer\"\n          placement={this.state.placement}\n          closable={false}\n          onClose={this.onClose}\n          visible={this.state.visible}\n        >\n         <ul>{nodes}</ul>\n      <div>Total: {subtotal}</div>\n      <div>\n        {checking && <div style={{color: 'red'}}>Checking ...</div>}\n        <Button onClick={onCheckout} disabled={subtotal <= 0.00 || loading } ><p style={{margin:'auto',lineHeight:'0px'}}>Checkout</p></Button>\n      </div>\n        </Drawer>\n      \n    </div>\n  );\n};\n\n}\n\n\nconst mapStateToProps = ({cart, products, loading}) => ({\n  products: cart.added.map(id => ({...products.byId[id], quantity: cart.quantities[id]})),\n  subtotal: cart.added.reduce((amount, id) => products.byId[id].price * cart.quantities[id] + amount, 0).toFixed(2),\n  loading: loading.models['cart'],\n  checking: loading.effects['cart/checkout']\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onCheckout: () => dispatch({\n    type: 'cart/checkout'\n  })\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);\n","import React from 'react';\nimport { connect } from 'dva';\n//import { getAllProducts } from '../reducers/products';\nimport ProductList from './ProductList';\nimport Cart from './Cart';\nimport 'antd/dist/antd.css';\nimport './index.css';\nimport { Layout } from 'antd';\n\nclass App extends React.Component {\n    componentDidMount () {\n        const { dispatch } = this.props;\n\n        dispatch({\n            type:'products/query'\n        });\n    }\n\n    render () {\n        const { Header, Footer, Sider, Content } = Layout;\n        return <div>\n        <Layout>\n      <Sider >Sider</Sider>\n      <Layout>\n        <Header><Cart/></Header>\n        <Content><ProductList/></Content>\n        <Footer></Footer>\n      </Layout>\n      </Layout>\n       \n        </div>\n    }\n}\n\nexport default connect()(App);\n","/**\n * Mocking client-server processing\n */\nimport axios from 'axios'\n\nexport default {\n  getProducts: () => axios.get('products.json'),\n  buyProducts: (payload) => new Promise((resolve, reject) => setTimeout(() => resolve(payload), 2000)) //只是为了模拟axios.post的效果\n}\n","import { normalize, schema } from \"normalizr\";\n\nimport shop from \"../api/shop\";\n\n// 关于normalizr库，与官方示例直接用byId, allIds去组织还别扭\n// 此处仅仅是为了尝试下引入这个库的效果，它的用法还有待深入\n// 但是不论哪一种写法，无揭示了一个问题，如果state需要相关引用，\n// 根据ID组织状态是一个合理的方式。\nconst products = new schema.Entity(\"products\");\n\nexport default {\n  namespace: \"products\",\n  state: {\n    result: [],\n    byId: {}\n  },\n  effects: {\n    *query(action, { call, put }) {\n      const res = yield call(shop.getProducts);\n      yield put({\n        type: \"setProducts\",\n        payload: normalize(res.data, [products])\n      });\n    }\n  },\n  reducers: {\n    setProducts: (state, { payload }) => {\n      return {\n        ...state,\n        byId: payload.entities.products,\n        result: payload.result\n      };\n    },\n    decinstallments: (state, { payload: { id } }) => {\n      const selected = state.byId[id];\n      return {\n        ...state,\n        byId: {\n          ...state.byId,\n          [id]: { ...selected, installments: selected.installments - 1 }\n        }\n      };\n    }\n  }\n};\n","import shop from \"../api/shop\";\n\nconst initialState = {\n    added: [],\n    quantities: {\n    }\n  }\nexport default {\n  namespace: \"cart\",\n  state: initialState,\n  effects: {\n    *add({payload: { id }}, { call, put, select }) {\n      const product = yield select(state => state.products.byId[id]);\n      console.log('product', product);\n      if (product.installments > 0) {\n        yield put({\n          type: 'products/decinstallments', \n          payload: {\n            id\n          }\n        })\n        yield put({\n          type: 'addToCart',\n          payload: {\n            id\n          }\n        })\n      }\n    },\n    *checkout(action, {call, put, select}) {\n      const { cart } = yield select();\n      console.log(\"checkout cart\", cart);\n      const res = yield call(shop.buyProducts, cart);\n      yield put({\n        type: \"checkoutCompleted\",\n        payload: res\n      });\n    }\n  },\n  reducers: {\n    addToCart: (state, { payload: { id } }) => {\n      return {\n        ...state,\n        added: state.added.includes(id) ? [...state.added] : [...state.added, id],\n        quantities: {\n          ...state.quantities,\n          [id]: (state.quantities[id] || 0) + 1\n        }\n      }\n    },\n    checkoutCompleted: () => initialState\n  }\n};\n\n","import React from 'react';\nimport dva from 'dva';\nimport createLoading from 'dva-loading';\nimport App from './components/App';\nimport products from './models/products';\nimport cart from './models/cart';\n\nconst app = dva();\napp.model(products);\napp.model(cart);\napp.use(createLoading());\napp.router(() => <App />);\napp.start('#root');\n"],"sourceRoot":""}